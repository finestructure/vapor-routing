{"metadata":{"symbolKind":"module","title":"VaporRouting","roleHeading":"Framework","modules":[{"name":"VaporRouting"}],"externalID":"VaporRouting","role":"collection"},"topicSections":[{"generated":true,"title":"Articles","identifiers":["doc:\/\/co.pointfree.VaporRouting\/documentation\/VaporRouting\/GettingStarted"]},{"title":"Structures","identifiers":["doc:\/\/co.pointfree.VaporRouting\/documentation\/VaporRouting\/RoutingMiddleware"]}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/vaporrouting"]}],"sections":[],"identifier":{"url":"doc:\/\/co.pointfree.VaporRouting\/documentation\/VaporRouting","interfaceLanguage":"swift"},"kind":"symbol","primaryContentSections":[{"kind":"content","content":[{"text":"Additional Resources","anchor":"Additional-Resources","level":2,"type":"heading"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"reference","identifier":"https:\/\/github.com\/pointfreeco\/vapor-routing","isActive":true}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"https:\/\/github.com\/pointfreeco\/vapor-routing\/discussions","type":"reference"}]}]},{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"http:\/\/pointfree.co\/episodes\/ep188-tour-of-parser-printers-vapor-routing"}],"type":"paragraph"}]}]},{"text":"Motivation","anchor":"Motivation","level":2,"type":"heading"},{"inlineContent":[{"text":"Routing in ","type":"text"},{"identifier":"http:\/\/vapor.codes","isActive":true,"type":"reference"},{"text":" has a simple API that is similar to popular web frameworks in other languages, such as Ruby’s ","type":"text"},{"identifier":"http:\/\/sinatrarb.com","isActive":true,"type":"reference"},{"text":" or Node’s ","type":"text"},{"identifier":"http:\/\/expressjs.com","isActive":true,"type":"reference"},{"text":". It works well for simple routes, but complexity grows over time due to lack of type safety and the inability to ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"generate","type":"text"}]},{"text":" correct URLs to pages on your site.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To see this, consider an endpoint to fetch a book that is associated with a particular user:"}],"type":"paragraph"},{"type":"codeListing","code":["\/\/ GET \/users\/:userId\/books\/:bookId","app.get(\"users\", \":userId\", \"books\", \":bookId\") { req -> BooksResponse in","  guard","    let userId = req.parameters.get(\"userId\", Int.self),","    let bookId = req.parameters.get(\"bookId\", Int.self)","  else {","    struct BadRequest: Error {}","    throw BadRequest()","  }","","  \/\/ Logic for fetching user and book and constructing response...","  async let user = database.fetchUser(user.id)","  async let book = database.fetchBook(book.id)","  return BookResponse(...)","}"],"syntax":"swift"},{"inlineContent":[{"text":"When a URL request is made to the server whose method and path matches the above pattern, the closure will be executed for handling that endpoint’s logic.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Notice that we must sprinkle in validation code and error handling into the endpoint’s logic in order to coerce the stringy parameter types into first class data types. This obscures the real logic of the endpoint, and any changes to the route’s pattern must be kept in sync with the validation logic, such as if we rename the ","type":"text"},{"code":":userId","type":"codeVoice"},{"text":" or ","type":"text"},{"code":":bookId","type":"codeVoice"},{"text":" parameters.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"In addition to these drawbacks, we often need to be able to generate valid URLs to various server endpoints. For example, suppose we wanted to ","type":"text"},{"identifier":"https:\/\/github.com\/pointfreeco\/swift-html-vapor","type":"reference","isActive":true},{"text":" with a list of all the books for a user, including a link to each book. We have no choice but to manually interpolate a string to form the URL, or build our own ad hoc library of helper functions that do this string interpolation under the hood:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["Node.ul(","  user.books.map { book in","    .li(","      .a(.href(\"\/users\/\\(user.id)\/book\/\\(book.id)\"), book.title)","    )","  }",")"],"syntax":"swift"},{"type":"codeListing","code":["<ul>","  <li><a href=\"\/users\/42\/book\/321\">Blob autobiography<\/a><\/li>","  <li><a href=\"\/users\/42\/book\/123\">Life of Blob<\/a><\/li>","  <li><a href=\"\/users\/42\/book\/456\">Blobbed around the world<\/a><\/li>","<\/ul>"],"syntax":"html"},{"inlineContent":[{"text":"It is our responsibility to make sure that this interpolated string matches exactly what was specified in the Vapor route. This can be tedious and error prone.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"In fact, there is a typo in the above code. The URL constructed goes to “\/book\/:bookId”, but really it should be “\/book","type":"text"},{"inlineContent":[{"type":"text","text":"s"}],"type":"emphasis"},{"text":"\/:bookId”:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["- .a(.href(\"\/users\/\\(user.id)\/book\/\\(book.id)\"), book.title)","+ .a(.href(\"\/users\/\\(user.id)\/books\/\\(book.id)\"), book.title)"],"syntax":"diff"},{"inlineContent":[{"type":"text","text":"This library aims to solve these problems, and more, when dealing with routing in a Vapor application."}],"type":"paragraph"}]}],"hierarchy":{"paths":[[]]},"schemaVersion":{"minor":3,"major":0,"patch":0},"seeAlsoSections":[{"abstract":[{"text":"A free video from ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/www.pointfree.co"},{"text":" demonstrating how to use the vapor-routing library:","type":"text"}],"title":"Related Documentation","identifiers":["http:\/\/pointfree.co\/episodes\/ep188-tour-of-parser-printers-vapor-routing"]}],"abstract":[{"text":"A bidirectional Vapor router with more type safety and less fuss.","type":"text"}],"references":{"doc://co.pointfree.VaporRouting/documentation/VaporRouting":{"kind":"symbol","role":"collection","type":"topic","title":"VaporRouting","abstract":[{"text":"A bidirectional Vapor router with more type safety and less fuss.","type":"text"}],"url":"\/documentation\/vaporrouting","identifier":"doc:\/\/co.pointfree.VaporRouting\/documentation\/VaporRouting"},"doc://co.pointfree.VaporRouting/documentation/VaporRouting/RoutingMiddleware":{"abstract":[],"kind":"symbol","type":"topic","role":"symbol","url":"\/documentation\/vaporrouting\/routingmiddleware","identifier":"doc:\/\/co.pointfree.VaporRouting\/documentation\/VaporRouting\/RoutingMiddleware","title":"RoutingMiddleware","navigatorTitle":[{"text":"RoutingMiddleware","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RoutingMiddleware","kind":"identifier"}]},"http://expressjs.com":{"type":"link","title":"Express","url":"http:\/\/expressjs.com","identifier":"http:\/\/expressjs.com","titleInlineContent":[{"text":"Express","type":"text"}]},"http://vapor.codes":{"type":"link","title":"Vapor","url":"http:\/\/vapor.codes","identifier":"http:\/\/vapor.codes","titleInlineContent":[{"text":"Vapor","type":"text"}]},"http://sinatrarb.com":{"type":"link","title":"Sinatra","url":"http:\/\/sinatrarb.com","identifier":"http:\/\/sinatrarb.com","titleInlineContent":[{"text":"Sinatra","type":"text"}]},"doc://co.pointfree.VaporRouting/documentation/VaporRouting/GettingStarted":{"type":"topic","role":"article","title":"Getting Started","url":"\/documentation\/vaporrouting\/gettingstarted","identifier":"doc:\/\/co.pointfree.VaporRouting\/documentation\/VaporRouting\/GettingStarted","kind":"article","abstract":[{"text":"How to add Vapor Routing to your application and start using it immediately.","type":"text"}]},"https://github.com/pointfreeco/vapor-routing":{"type":"link","title":"GitHub Repo","url":"https:\/\/github.com\/pointfreeco\/vapor-routing","identifier":"https:\/\/github.com\/pointfreeco\/vapor-routing","titleInlineContent":[{"text":"GitHub Repo","type":"text"}]},"http://pointfree.co/episodes/ep188-tour-of-parser-printers-vapor-routing":{"type":"link","title":"Point-Free Video","url":"http:\/\/pointfree.co\/episodes\/ep188-tour-of-parser-printers-vapor-routing","identifier":"http:\/\/pointfree.co\/episodes\/ep188-tour-of-parser-printers-vapor-routing","titleInlineContent":[{"text":"Point-Free Video","type":"text"}]},"https://github.com/pointfreeco/swift-html-vapor":{"type":"link","title":"generate an HTML page","url":"https:\/\/github.com\/pointfreeco\/swift-html-vapor","identifier":"https:\/\/github.com\/pointfreeco\/swift-html-vapor","titleInlineContent":[{"text":"generate an HTML page","type":"text"}]},"https://github.com/pointfreeco/vapor-routing/discussions":{"type":"link","title":"Discussions","url":"https:\/\/github.com\/pointfreeco\/vapor-routing\/discussions","identifier":"https:\/\/github.com\/pointfreeco\/vapor-routing\/discussions","titleInlineContent":[{"text":"Discussions","type":"text"}]}}}